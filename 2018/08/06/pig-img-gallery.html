<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Jekyll pig image gallery</title>
  <meta name="description" content="A few posts ago I added image galleries. In the menu above you can access albums and the Life Drawing gallery. Initially I used the Jekyll Photo Gallery (JPG...">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://chuckleplant.github.io/2018/08/06/pig-img-gallery.html">
  <link rel="alternate" type="application/rss+xml" title="Chuck LePlant" href="https://chuckleplant.github.io/feed.xml">
  <link rel="stylesheet" type="text/css" href="https://chuckleplant.github.io/css/jekyll-photo-gallery.css">

  <script type="text/javascript" async
   src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ TeX: { extensions: ["color.js"] }});
    MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "all" } }});
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123985810-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-123985810-1');
  </script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Chuck LePlant</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
          <a class="page-link" href="/about">About</a>
          <a class="page-link" href="/albums">Albums</a>
          <a class="page-link" href="/life-drawing">Life Drawing</a>
          <a class="page-link" href="/archive">Archive</a>
      
      </div>
    </nav>

    

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Jekyll pig image gallery</h1>
    <p class="post-meta"><time datetime="2018-08-06T00:00:00+02:00" itemprop="datePublished">Aug 6, 2018</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>A few posts ago I added image galleries. In the menu above you can access albums and the Life Drawing gallery. Initially I used the <a href="https://github.com/aerobless/jekyll-photo-gallery">Jekyll Photo Gallery</a> (JPG) by Theo Winter, which had many of the features I wanted. I liked specially the generation of a unique page for each photo and the google maps thumbnail generation. The JPG used the <a href="http://miromannino.github.io/Justified-Gallery/">Justified Gallery</a> by Miro Mannino to show a grid of images.</p>

<p>I noticed that for a great amount of images the site took too much time to load. After a small search I found the <a href="https://github.com/schlosser/pig.js">Progressive Image Grid</a> (PIG) by Dan Schlosser, this gallery could load an absurd amount of images without much effort. It does this by loading and unloading the images, buffering them based on the user’s browsing direction.</p>

<h2 id="changes-to-jekyll-photo-gallery">Changes to Jekyll Photo Gallery</h2>

<p>First I made a few changes to the <code class="highlighter-rouge">photo.html</code> layout from the original JPG. I changed where the map was placed and increased the map size for a higher resolution view. I also made the elements responsive and added a few icons based on the flickr layout.</p>

<p>The image layout acts in a similar way to how YouTube does for videos, it keeps a maximum height, which responds to the user shrinking the window width. I also added arrows on each side for feedback, this way the users know they can navigate by clicking.</p>

<div class="Container">
    <div class="Content">
<img class="imagedropshadow" src="/images/photo-page.png" alt="The photo page shows all relevant information from each image. The map static image was changed to occupy the blog's wrapper width." />  
    </div>
</div>
<p><span class="caption" style="font-size: 80%"><i>The photo page shows all relevant information from each image. The map static image was changed to occupy the blog’s wrapper width.</i></span></p>

<p>A big change on performance was precomputing all the exif data to be used in the photo page. In the original JPG these were called via Liquid script when generating the page. This happened each time Jekyll was built. Given that I made a script to set up photos and thumbnails in Pytho, I also made it so that all the required exif data was pregenerated just once. It is saved to a YAML file and used directly by Jekyll. The site generation time was basically halved by this.</p>

<h2 id="changes-to-progressive-image-grid">Changes to Progressive Image Grid</h2>

<p>The first challenge was to make PIG usable from Jekyll. Luckily JPG had already set the pathway to do this. I only had to replace the Justified Gallery code with PIG code.</p>

<p>For the actual PIG code I did have to make the images clickable, I added a <code class="highlighter-rouge">url</code> field for the images list. Then in JavaScript I created a <code class="highlighter-rouge">div</code> element to act as the captions. I shamelessly copied the captions from Justified Gallery, including the hover behaviour and animations.</p>

<h2 id="how-to-use-this-in-your-jekyll-site">How to use this in your Jekyll site</h2>

<p>If you’d like to use this image gallery you can grab <a href="https://github.com/chuckleplant/blog/tree/pig-gallery">this commit</a>. It will come in handy in case I change the theme or add too many custom features to my blog. At the moment of writing I’m using the default Jekyll minimal theme.</p>

<p>All you need to do to set it up is place your images in the following folder structure:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./
    img/
        albums/
            Hawaii/
            Alderaan/
            Another Album/
            ...
</code></pre></div></div>

<p>Then run the <code class="highlighter-rouge">setup-photos.py</code> script, in the scripts folder. This script will do the following:</p>

<ul>
  <li>Rotate your images according to the orientation specified by the metadata.</li>
  <li>Create thumbnails of height 20px and 250px, used by the PIG code.</li>
  <li>Create a YAML file for each album, describing all the images.</li>
  <li>All metadata found in the EXIF of your JPEGs will be written to the YAML descriptor. Later to be used in the photo page.</li>
</ul>

<p>Use the following snippet to insert an album anywhere in a post.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> { %includeGallery ALBUM_ID% }
</code></pre></div></div>

<p>That should be it, run <code class="highlighter-rouge">jekyll serve --watch</code> to generate your site and you should be able to see your albums.</p>


  </div>
   
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.developer = 1;
this.page.url = 'https://chuckleplant.github.io/2018/08/06/pig-img-gallery.html';  
this.page.identifier = 'pigGallery'; 
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://chuckleplant.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
 
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Chuck LePlant</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Chuck LePlant</li>
          <li><a href="mailto:sergio.basurco@gmail.com">sergio.basurco@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/chuckleplant"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">chuckleplant</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Sergio Basurco's personal portfolio. I'm a software developer based in Barcelona. Have fun browsing my little projects.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

  <script src="https://chuckleplant.github.io/js/vendor/jquery-1.9.1.min.js"></script>
  <script src="https://chuckleplant.github.io/js/plugins/jquery.justifiedGallery.min.js"></script>
</html>
